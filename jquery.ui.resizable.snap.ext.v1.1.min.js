/**
 * "jQuery UI Resizable Snap" - Extension to the jQuery UI Resizable plugin for snapping while resizing.
 *
 * @copyright       Copyright 2011, Alexander Polomoshnov
 * @license         MIT license (https://raw.github.com/polomoshnov/jQuery-UI-Resizable-Snap-extension/master/LICENSE.txt)
 * @link            https://github.com/polomoshnov/jQuery-UI-Resizable-Snap-extension
 * @version         1.1
 */
(function(a){function e(a){return parseInt(a.css("margin-top"),10)||0}function d(a){return parseInt(a.css("margin-left"),10)||0}function c(a){return a.sort(function(a,b){return!a?1:!b?-1:Math.abs(a)-Math.abs(b)})[0]}function b(a,b,c){return Math.abs(a)<c?a:Math.abs(b)<c?b:0}a.extend(a.ui.resizable.prototype.options,{snapTolerance:20,snapMode:"both"});a.ui.plugin.add("resizable","snap",{start:function(b,c){var f=a(this),g=f.data("resizable"),h=g.options.snap;g.ow=c.helper.outerWidth()-c.size.width;g.oh=c.helper.outerHeight()-c.size.height;g.lm=d(f);g.tm=e(f);g.coords=[];a(typeof h=="string"?h:":data(resizable)").each(function(){if(this==g.element[0]||this==c.helper[0])return;var b=a(this),f=b.position(),h=f.left+d(b),i=f.top+e(b);g.coords.push({l:h,t:i,r:h+b.outerWidth(),b:i+b.outerHeight()})})},resize:function(d,e){var f=[],g=[],h=[],i=[],j=a(this).data("resizable"),k=j.axis,l=j.options.snapTolerance,m=j.options.snapMode,n=e.position.left+j.lm,o=n-l,p=e.position.top+j.tm,q=p-l,r=n+e.size.width+j.ow,s=r+l,t=p+e.size.height+j.oh,u=t+l;a.each(j.coords,function(){var a=Math.min(s,this.r)-Math.max(o,this.l),c=Math.min(u,this.b)-Math.max(q,this.t);if(a<0||c<0)return;if(m=="outer"){switch(k){case"w":case"e":if(a>l*2)return;break;case"n":case"s":if(c>l*2)return}}else if(m=="inner"){switch(k){case"w":case"e":if(a<l*2)return;break;case"n":case"s":if(c<l*2)return}}switch(k){case"w":f.push(b(-(n-this.l),-(n-this.r),l));break;case"n":g.push(b(-(p-this.t),-(p-this.b),l));break;case"e":h.push(b(-(r-this.l),-(r-this.r),l));break;case"s":i.push(b(-(t-this.t),-(t-this.b),l))}});j._css=null;if(h.length){j._css={width:(e.size.width+=c(h))+j.ow}}else if(i.length){j._css={height:(e.size.height+=c(i))+j.oh}}else if(f.length){var v=c(f);j._css={left:e.position.left+=v,width:e.size.width-=v}}else if(g.length){var v=c(g);j._css={top:e.position.top+=v,height:e.size.height-=v}}},stop:function(b,c){var d=a(this).data("resizable");if(d._helper&&d._css)d.element.css(d._css)}})})(jQuery)